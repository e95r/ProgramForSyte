# ProgramForSyte — MVP A+B

Локальное desktop-приложение для работы со стартовым протоколом по плаванию.

## Что реализовано в этом шаге (A+B)
- Архитектура проекта: `app`, `core`, `io`, `tests`, `data`, `meet`.
- Импорт стартового Excel (`.xlsx`) в SQLite (`./meet/meet.db`).
- Список дистанций (листы Excel), просмотр участников с заплывами/дорожками.
- Экран отметки неявки:
  - поиск по ФИО;
  - мультивыбор строк;
  - кнопка **Не явился** (только отметка без пересборки);
  - кнопка **Вернуть в заплывы** для отмены ошибочной неявки с автоматической пересборкой;
  - кнопка **Пересобрать** (мягкая/полная по чекбоксу).
- Автосохранение каждого действия и `audit_log`.
- Бэкап БД вручную кнопкой и автоматически при старте (если БД уже есть).

## Требования
- Python 3.11+ (минимум 3.10 для текущего кода)
- PySide6
- openpyxl
- pytest

## Установка
```bash
python -m venv .venv
# Windows
.venv\Scripts\activate
# macOS/Linux
source .venv/bin/activate

pip install -r requirements.txt
```

## Запуск
```bash
python -m app
```

## Тесты
```bash
pytest
```

## Подготовка примера данных
```bash
python data/create_sample_startlist.py
```

Скрипт создаёт реальный `./data/competition-15-startlist.xlsx` локально для импорта в приложение. В репозитории хранится текстовый placeholder по этому пути, чтобы PR-система не отклоняла бинарные файлы.

## Базовый сценарий MVP A+B
1. Сгенерируйте пример Excel: `python data/create_sample_startlist.py`.
2. Нажмите **Импорт Excel** и выберите `./data/competition-15-startlist.xlsx`.
3. Слева выберите дистанцию.
4. Справа найдите участника через поиск, выделите несколько строк.
5. Нажмите **Не явился**, чтобы отметить снятых спортсменов.
6. Нажмите **Пересобрать** — дорожки обновятся внутри текущих заплывов (или полностью при включенном чекбоксе).
7. Если отметка была ошибочной, выделите спортсмена и нажмите **Вернуть в заплывы**.

## Структура
```
/app
/core
/io
/tests
/data
/meet
```

## Дальше (следующие шаги)
- Экран стартового листа + PDF.
- Ввод результатов с маской `00:00:00` (пока не реализовано в MVP A+B).
- Итоговый протокол заплыва/дистанции + PDF (пока не реализовано в MVP A+B).
- Сборка в единый `.exe` через PyInstaller.
